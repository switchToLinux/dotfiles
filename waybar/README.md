# waybar说明


## Theme列表

| 主题 | 展示 |
|:---- |:--------------------------------- |
| TOP-Default |  ![img](https://i.imgur.com/pVH8S5e.png) |
| TOP-cjbassi |  ![img](https://i.imgur.com/Qbj43Uz.png) |
|TOP-mxkrsv | ![](https://camo.githubusercontent.com/61190e7030801b657a2507fbc5f330db4b040cb69fb330a7122118e15de96162/68747470733a2f2f692e696d6775722e636f6d2f627974427046442e706e67)|
|  Mubin's Gruvboxed| ![img](https://raw.githubusercontent.com/MubinMuhammad/MinimalSwayFX/refs/heads/main/assets/waybar.png)|
| Whiteshadow's | ![img](https://private-user-images.githubusercontent.com/116454864/400162079-6bd7f98e-1d4a-4c82-92ba-c74a63bbb908.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3NDQ3ODc4NDMsIm5iZiI6MTc0NDc4NzU0MywicGF0aCI6Ii8xMTY0NTQ4NjQvNDAwMTYyMDc5LTZiZDdmOThlLTFkNGEtNGM4Mi05MmJhLWM3NGE2M2JiYjkwOC5wbmc_WC1BbXotQWxnb3JpdGhtPUFXUzQtSE1BQy1TSEEyNTYmWC1BbXotQ3JlZGVudGlhbD1BS0lBVkNPRFlMU0E1M1BRSzRaQSUyRjIwMjUwNDE2JTJGdXMtZWFzdC0xJTJGczMlMkZhd3M0X3JlcXVlc3QmWC1BbXotRGF0ZT0yMDI1MDQxNlQwNzEyMjNaJlgtQW16LUV4cGlyZXM9MzAwJlgtQW16LVNpZ25hdHVyZT03MzBlZTBmZTk3MGQxODg4ZjM2OGMwY2NlNzdiNzEzYmQ4MTM2OWEyOTYzZTBkMzFjNzk0NDI3Mzk4NjExMzdiJlgtQW16LVNpZ25lZEhlYWRlcnM9aG9zdCJ9.0kzit8NryboBqUpoeMKcUsf0a139VKy_g88YKA3XIKM)|
| Win10-like style| ![img](https://raw.githubusercontent.com/TheFrankyDoll/win10-style-waybar/main/preview.png) |
| TOP sejjy's mechabar| ![img](https://github.com/sejjy/mechabar/raw/classic/.github/assets/catppuccin-mocha.png) |
| Anik200's style | ![img](https://private-user-images.githubusercontent.com/87752958/367375540-251c791b-a292-4837-9b4b-94dab2040c79.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3NDUyNDM3ODYsIm5iZiI6MTc0NTI0MzQ4NiwicGF0aCI6Ii84Nzc1Mjk1OC8zNjczNzU1NDAtMjUxYzc5MWItYTI5Mi00ODM3LTliNGItOTRkYWIyMDQwYzc5LnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNTA0MjElMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjUwNDIxVDEzNTEyNlomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWZkYzAyMzVmOGRkYTZlZTkzYTkwNTczY2NmZDRmYzg2ZDZkY2I4YjdiNDU3OGIwMWVhZWY3NzQ2NGQyZTQ2ODMmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.lbpS8qHW-BeqVUlmZUpBwmMg1G6NnKIHEDFixNJdpnc)
| DN-debug's waybar | ![img](https://github.com/DN-debug/waybar-examples/raw/main/screenshot/swayPost.png)|
| niksingh710's waybar| [niksingh710's gdots](https://github.com/niksingh710/gdots) |
| Anik's super waybar | ![img](https://private-user-images.githubusercontent.com/87752958/365437343-5ba1a8a3-b4ea-45f8-994b-6bdb9257c314.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3NDUyNDM3MjgsIm5iZiI6MTc0NTI0MzQyOCwicGF0aCI6Ii84Nzc1Mjk1OC8zNjU0MzczNDMtNWJhMWE4YTMtYjRlYS00NWY4LTk5NGItNmJkYjkyNTdjMzE0LnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNTA0MjElMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjUwNDIxVDEzNTAyOFomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWFlYWY1MGFmMDgwMjNkYzgyYWZlNGUyMTI4OTFkY2Q5Yzg0NTAwZmE4MmY3NzE4OTgyOTRmMDhjYTQ5MjdiM2YmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.xsUfbQTmjLaUM5mcSxHUibHAoYQJqaMnbS2B4i-SFpk) |
| cxOrz's waybar | ![img](https://private-user-images.githubusercontent.com/32982052/428063267-eb9cc7ca-612c-4fc4-bc33-7be5ca4c90f6.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3NDUyNDM3MjgsIm5iZiI6MTc0NTI0MzQyOCwicGF0aCI6Ii8zMjk4MjA1Mi80MjgwNjMyNjctZWI5Y2M3Y2EtNjEyYy00ZmM0LWJjMzMtN2JlNWNhNGM5MGY2LnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNTA0MjElMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjUwNDIxVDEzNTAyOFomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWRkNjlmZGE4NDYwMGU5YWUwYmFiNDM5ZDRmMDQ2NzhlNGJhOTUzYTUzZjUwZTMyZTk4NTIzYjBiODc4NDIzNDYmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.7Xs6R2Ii79vJfwpSNkk-h75mRwLbfcNuWvq-BpgUYPQ) |


##主题设计

我希望实现一个waybar主题框架，需要实现以下功能：
- 颜色搭配方案化，所有用到的颜色都定义在 colors/theme_name.css 中， 然后在 style_name.css 中引用，请帮我合理规划一个颜色名称设计方案。
- 颜色搭配方案要支持两组的7色搭配，一组是亮色，一组是暗色。
- 颜色搭配方案可以按照模块引用命名，方便快速了解每个模块的颜色搭配。


目录结构说明

| 目录 | 说明 |
|:---- |:--------------------------------- |
| configs | 只负责布局配置， 左、中、右搭配什么模块，模块间是否有分隔符等 |
| styles | 只负责样式配置，比如颜色搭配、字体、间距等 |
|modules | 只负责模块配置，比如模块名称、模块参数等 |
|scripts | 脚本工具，比如切换主题样式功能，自动切换颜色搭配功能 |
| themes | 主题样式定义, 规定了某个主题对应的config/style文件名以及是否需要颜色自动切换功能 |

### ColorScheme设计

名称约定:
| 名称 | 说明 |
|:---- |:--------------------------------- |
| foreground | 默认前景色 |
| background | 默认背景色 |
| color0 | 颜色0 |
| color1 | 颜色1 |
| color2 | 颜色2 |
| color3 | 颜色3 |
| color4 | 颜色4 |
| color5 | 颜色5 |
| color6 | 颜色6 |
| color7 | 颜色7 |
| color8 | 颜色8 |
| color9 | 颜色9 |
| color10 | 颜色10 |
| color11 | 颜色11 |
| color12 | 颜色12 |
| color13 | 颜色13 |
| color14 | 颜色14 |
| color15 | 颜色15 |

> 其中 颜色 1-15 都可以用于任何位置， 但分隔符 custom/arrowN 中的 N 对应的颜色就是 colorN 的颜色。

### StyleScheme设计

规则约束：
- 对于支持颜色自动更换的主题，需要引用 color方案， 并且在 style 中定义好 color0 - color15 的颜色搭配。
- 对于不支持颜色自动更换的主题，需要在 style 中定义好颜色搭配即可，当然更建议使用 color定义的颜色方案（复用）。

### ModuleScheme设计

module 分类：
- 内置模块： 比如 cpu、memory、network、battery、clock, 定义在 modules/modules.json 中。
- 自定义模块： 比如 custom/arrow1, 定义在 modules/modules-custom.json 中。
- 分隔符模块： 比如 custom/arrow1, 定义在 modules/modules-arrow.json 中。


### 自动生成颜色样式规则

在 ~/.config/waybar/config 中定义好左、中、右模块的顺序，然后运行 scripts/gen_color.sh  脚本，即可自动生成样式规则, 规则逻辑如下：

分隔符模块： custom/arrowN(用于右侧) 和 custom/arrow1N(用于左侧和中间)
功能模块:  除了 分隔符模块的其他模块.

左侧颜色规则：
- 首个模块如果是分隔符模块, 则 custom/arrow1N 的背景色为 @colorN， 前景色为 @background. 
- 首个模块如果是功能模块, 则 功能模块的背景色为 @background ， 前景色为相邻分隔符模块 custom/arrow1N 的 @colorN 颜色.
- 非首个的分隔符模块 custom/arrow1N 的背景色为 @colorN ， 前景色为上一个分隔符模块 custom/arrow1M对应的 @colorM颜色.
- 非首个功能模块的背景色为前一个分隔符模块 custom/arrow1M对应的 @colorM颜色， 前景色为 相邻下一个分隔符模块 custom/arrow1N对应的 @colorN 颜色 .

中间颜色规则：
- 与左侧颜色规则相同。

右侧颜色规则：
- 解析规则与左侧颜色规则相同， 但处理右侧模块要逆序解析模块顺序。


请分别实现这三个模块的颜色规则处理逻辑， 注意 “.modules-right” jq 处理 "-"  符号报错，需要注意.

读取的配置文件： $HOME/.config/waybar/config
生成的文件路径： $HOME/.config/waybar/styles/autogen_color.css

配置参考示例：
```css
    "modules-left": [
        "custom/arrow10",
        "hyprland/mode",
        "custom/arrow11",
        "hyprland/workspaces",
        "custom/arrow12",
        "hyprland/window",
        "custom/arrow13"
    ],
    "modules-center": [
        "custom/arrow0,
        "mpris",
        "custom/arrow1",
    ],
    "modules-right": [
        "custom/arrow9",
        "pulseaudio",
        "custom/arrow8",
    ]
```
参考生成的样式规则类似如下：
```css
#hyprland-mode {
    color: @color11;
    background: @color10;
}
#custom-arrow0{
    color: @color1;
    background: @background;
}

```

## HowTo主题配置

- **颜色方案选择**: 我已经实现了一个颜色配置功能页面，[点击这里](https://switchtolinux.github.io/switchToLinux/pages/color-schema/)配置自己配置喜欢的颜色搭配方案，至少要有 color0-color9颜色配置， color10 以后可以用于其他配置， 然后保存在 colors 目录下。
- **样式搭配配置**： 在 styles 目录新建一个样式配置文件。
- **布局搭配方案配置**： 在 configs 目录新创建一个布局配置文件。
- **配置主题信息**： 在 themes.json 配置自己创建的主题信息。

### themes.json配置说明

```json
[
    {
        "name": "TOP round",  // 主题名称，必须唯一
        "config": "TOP-defo.json", // 布局配置文件
        "style": "style_round.css", // 样式配置文件
        "color": "auto_default.css", // 可选：支持自动切换颜色方案的默认颜色方案，需要以 auto_ 开头的颜色方案文件。
        "arrow": "space space",  // 可选： 强制分隔符设定，配置此参数后，无论在菜单中选择那种分隔符都不会生效。
        "scripts": [ // 配置需要执行的自定义脚本，这里配置了自动切换颜色脚本。
            "auto_color.sh"
        ]
    }
]

```

## 配置参考资料

- [waybar-github](https://github.com/Alexays/Waybar/wiki)

